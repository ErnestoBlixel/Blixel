---\nimport { languages, getLangFromUrl, getAlternateUrls, siteInfo, type SupportedLanguage } from '../i18n/config';\nimport { getLocalizedMeta } from '../i18n/utils';\n\ninterface Props {\n  title?: string;\n  description?: string;\n  keywords?: string;\n  image?: string;\n  imageAlt?: string;\n  type?: 'website' | 'article';\n  publishedTime?: string;\n  modifiedTime?: string;\n  author?: string;\n  currentUrl: URL;\n  pageKey?: string; // Key para las traducciones automáticas\n}\n\nconst {\n  title,\n  description,\n  keywords,\n  image,\n  imageAlt,\n  type = 'website',\n  publishedTime,\n  modifiedTime,\n  author,\n  currentUrl,\n  pageKey = 'home'\n} = Astro.props;\n\nconst currentLang = getLangFromUrl(currentUrl);\nconst alternateUrls = getAlternateUrls(currentUrl.pathname, currentLang);\nconst currentSiteInfo = siteInfo[currentLang];\n\n// Obtener meta tags localizados\nconst localizedMeta = getLocalizedMeta(pageKey, currentLang, title, description);\n\n// Construir URLs completas\nconst canonicalUrl = `https://blixel.es${currentUrl.pathname}`;\nconst fullImageUrl = image ? (image.startsWith('http') ? image : `https://blixel.es${image}`) : `https://blixel.es/og-image-${currentLang}.jpg`;\n\n// Schema.org para organización\nconst organizationSchema = {\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"Organization\",\n  \"name\": \"Blixel\",\n  \"url\": \"https://blixel.es\",\n  \"logo\": \"https://blixel.es/logo.png\",\n  \"description\": currentSiteInfo.description,\n  \"sameAs\": [\n    \"https://linkedin.com/company/blixel\",\n    \"https://twitter.com/blixel\"\n  ],\n  \"contactPoint\": {\n    \"@type\": \"ContactPoint\",\n    \"telephone\": \"+34-XXX-XXX-XXX\",\n    \"contactType\": \"customer service\",\n    \"areaServed\": \"ES\",\n    \"availableLanguage\": [\"Spanish\", \"Catalan\"]\n  }\n};\n\n// Schema.org para la página web\nconst websiteSchema = {\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"WebSite\",\n  \"name\": currentSiteInfo.name,\n  \"url\": \"https://blixel.es\",\n  \"description\": currentSiteInfo.description,\n  \"inLanguage\": currentLang === 'ca' ? 'ca-ES' : 'es-ES',\n  \"potentialAction\": {\n    \"@type\": \"SearchAction\",\n    \"target\": \"https://blixel.es/buscar?q={search_term_string}\",\n    \"query-input\": \"required name=search_term_string\"\n  }\n};\n\n// Schema.org para artículo (si es necesario)\nconst articleSchema = type === 'article' ? {\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"Article\",\n  \"headline\": localizedMeta.title,\n  \"description\": localizedMeta.description,\n  \"image\": fullImageUrl,\n  \"author\": {\n    \"@type\": \"Organization\",\n    \"name\": author || \"Blixel\"\n  },\n  \"publisher\": {\n    \"@type\": \"Organization\",\n    \"name\": \"Blixel\",\n    \"logo\": {\n      \"@type\": \"ImageObject\",\n      \"url\": \"https://blixel.es/logo.png\"\n    }\n  },\n  \"datePublished\": publishedTime,\n  \"dateModified\": modifiedTime || publishedTime,\n  \"inLanguage\": currentLang === 'ca' ? 'ca-ES' : 'es-ES'\n} : null;\n---\n\n<!-- Meta tags básicos -->\n<title>{localizedMeta.title}</title>\n<meta name=\"description\" content={localizedMeta.description} />\n<meta name=\"keywords\" content={keywords || localizedMeta.keywords} />\n<meta name=\"author\" content={author || currentSiteInfo.author} />\n<meta name=\"robots\" content=\"index, follow\" />\n\n<!-- Idioma y región -->\n<html lang={currentLang === 'ca' ? 'ca-ES' : 'es-ES'} />\n<meta name=\"language\" content={currentLang === 'ca' ? 'ca-ES' : 'es-ES'} />\n<meta name=\"geo.region\" content=\"ES\" />\n<meta name=\"geo.placename\" content={currentLang === 'ca' ? 'Catalunya' : 'España'} />\n\n<!-- URLs canónicas y alternativas -->\n<link rel=\"canonical\" href={canonicalUrl} />\n{Object.entries(alternateUrls).map(([lang, url]) => {\n  const fullUrl = `https://blixel.es${url}`;\n  const hreflang = lang === 'ca' ? 'ca-ES' : 'es-ES';\n  return <link rel=\"alternate\" hreflang={hreflang} href={fullUrl} />;\n})}\n<link rel=\"alternate\" hreflang=\"x-default\" href={`https://blixel.es${alternateUrls.es}`} />\n\n<!-- Open Graph / Facebook -->\n<meta property=\"og:type\" content={type} />\n<meta property=\"og:title\" content={localizedMeta.title} />\n<meta property=\"og:description\" content={localizedMeta.description} />\n<meta property=\"og:url\" content={canonicalUrl} />\n<meta property=\"og:image\" content={fullImageUrl} />\n<meta property=\"og:image:alt\" content={imageAlt || localizedMeta.title} />\n<meta property=\"og:site_name\" content={currentSiteInfo.name} />\n<meta property=\"og:locale\" content={currentLang === 'ca' ? 'ca_ES' : 'es_ES'} />\n{Object.entries(alternateUrls)\n  .filter(([lang]) => lang !== currentLang)\n  .map(([lang]) => {\n    const locale = lang === 'ca' ? 'ca_ES' : 'es_ES';\n    return <meta property=\"og:locale:alternate\" content={locale} />;\n  })\n}\n\n<!-- Twitter Card -->\n<meta name=\"twitter:card\" content=\"summary_large_image\" />\n<meta name=\"twitter:title\" content={localizedMeta.title} />\n<meta name=\"twitter:description\" content={localizedMeta.description} />\n<meta name=\"twitter:image\" content={fullImageUrl} />\n<meta name=\"twitter:image:alt\" content={imageAlt || localizedMeta.title} />\n<meta name=\"twitter:site\" content=\"@blixel\" />\n<meta name=\"twitter:creator\" content=\"@blixel\" />\n\n<!-- Meta tags específicos para artículos -->\n{type === 'article' && (\n  <>\n    <meta property=\"article:published_time\" content={publishedTime} />\n    <meta property=\"article:modified_time\" content={modifiedTime || publishedTime} />\n    <meta property=\"article:author\" content={author || \"Blixel\"} />\n    <meta property=\"article:section\" content=\"Technology\" />\n    <meta property=\"article:tag\" content={keywords || localizedMeta.keywords} />\n  </>\n)}\n\n<!-- Favicon dinámico según idioma -->\n<link rel=\"icon\" href={`/favicon-${currentLang}.ico`} type=\"image/x-icon\" />\n<link rel=\"apple-touch-icon\" href={`/apple-touch-icon-${currentLang}.png`} />\n\n<!-- Preload de recursos críticos -->\n<link rel=\"preload\" href=\"/fonts/inter-var.woff2\" as=\"font\" type=\"font/woff2\" crossorigin />\n<link rel=\"dns-prefetch\" href=\"//fonts.googleapis.com\" />\n<link rel=\"dns-prefetch\" href=\"//fonts.gstatic.com\" />\n\n<!-- Schema.org structured data -->\n<script type=\"application/ld+json\" set:html={JSON.stringify(organizationSchema)} />\n<script type=\"application/ld+json\" set:html={JSON.stringify(websiteSchema)} />\n{articleSchema && (\n  <script type=\"application/ld+json\" set:html={JSON.stringify(articleSchema)} />\n)}\n\n<!-- Performance hints -->\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n<meta name=\"format-detection\" content=\"telephone=no\" />\n<meta name=\"theme-color\" content=\"#000000\" media=\"(prefers-color-scheme: dark)\" />\n<meta name=\"theme-color\" content=\"#ffffff\" media=\"(prefers-color-scheme: light)\" />\n\n<!-- Security headers -->\n<meta http-equiv=\"X-Content-Type-Options\" content=\"nosniff\" />\n<meta http-equiv=\"X-Frame-Options\" content=\"DENY\" />\n<meta http-equiv=\"X-XSS-Protection\" content=\"1; mode=block\" />\n<meta name=\"referrer\" content=\"strict-origin-when-cross-origin\" />\n