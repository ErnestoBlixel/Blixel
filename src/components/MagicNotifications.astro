---
// Componente Astro para mostrar las Magic UI Notifications en el sitio principal
---

<div id="notification-container" class="fixed top-4 right-4 z-50"></div>

<script>
  // Funci√≥n para crear notificaciones Magic UI
  window.createMagicNotification = function(type, title, message) {
    const container = document.getElementById('notification-container');
    if (!container) return;

    const notificationId = 'notification-' + Date.now();
    
    // Crear la notificaci√≥n
    const notification = document.createElement('div');
    notification.id = notificationId;
    notification.className = `
      magic-notification w-96 p-6 mb-4 rounded-xl shadow-2xl backdrop-blur-sm border
      bg-gradient-to-br border-white/20 relative overflow-hidden
      transform transition-all duration-500 opacity-0 translate-x-full
    `;
    
    // Configurar gradientes y colores seg√∫n el tipo
    const typeConfigs = {
      success: {
        gradient: 'from-emerald-500/20 via-green-500/10 to-teal-500/20',
        icon: '‚úÖ',
        borderColor: '#10b981'
      },
      warning: {
        gradient: 'from-yellow-500/20 via-orange-500/10 to-amber-500/20',
        icon: '‚ö†Ô∏è',
        borderColor: '#f59e0b'
      },
      error: {
        gradient: 'from-red-500/20 via-rose-500/10 to-pink-500/20',
        icon: '‚ùå',
        borderColor: '#ef4444'
      },
      info: {
        gradient: 'from-blue-500/20 via-indigo-500/10 to-cyan-500/20',
        icon: '‚ÑπÔ∏è',
        borderColor: '#3b82f6'
      },
      star: {
        gradient: 'from-yellow-500/20 via-amber-500/10 to-orange-500/20',
        icon: '‚≠ê',
        borderColor: '#f59e0b'
      },
      gift: {
        gradient: 'from-green-500/20 via-emerald-500/10 to-teal-500/20',
        icon: 'üéÅ',
        borderColor: '#10b981'
      }
    };
    
    const config = typeConfigs[type] || typeConfigs.info;
    notification.classList.add(...config.gradient.split(' '));
    
    notification.innerHTML = `
      <!-- Border Beam Animation -->
      <div class="absolute inset-0 overflow-hidden rounded-xl">
        <div class="absolute inset-0 rounded-xl animate-border-beam" 
             style="background: linear-gradient(90deg, transparent, transparent, ${config.borderColor}, ${config.borderColor}, transparent, transparent); 
                    background-size: 200% 100%; 
                    animation: border-beam 12s linear infinite;"></div>
      </div>
      
      <!-- Particles -->
      <div class="absolute inset-0 overflow-hidden pointer-events-none">
        ${Array.from({length: 20}, (_, i) => `
          <div class="absolute w-1 h-1 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full animate-pulse"
               style="left: ${Math.random() * 100}%; top: ${Math.random() * 100}%; 
                      animation-delay: ${Math.random() * 3}s; 
                      animation-duration: ${2 + Math.random() * 3}s;"></div>
        `).join('')}
      </div>
      
      <!-- Content -->
      <div class="relative z-10">
        <div class="flex items-start justify-between mb-4">
          <div class="flex items-center space-x-3">
            <div class="p-2 rounded-full bg-white/10 backdrop-blur-sm text-2xl">
              ${config.icon}
            </div>
            <div>
              <h3 class="font-bold text-white text-lg">${title}</h3>
              <p class="text-white/80 text-sm">${message}</p>
            </div>
          </div>
          <button onclick="removeMagicNotification('${notificationId}')" 
                  class="p-1 rounded-full bg-white/10 hover:bg-white/20 transition-all duration-200 backdrop-blur-sm">
            <span class="text-white/70 text-lg">√ó</span>
          </button>
        </div>
        <div class="text-xs text-white/60">Ahora mismo</div>
      </div>
      
      <!-- Magic Spotlight Effect -->
      <div class="magic-spotlight absolute pointer-events-none transition-opacity duration-300 opacity-0"></div>
    `;
    
    // Agregar al contenedor
    container.appendChild(notification);
    
    // Animar entrada
    setTimeout(() => {
      notification.classList.remove('opacity-0', 'translate-x-full');
      notification.classList.add('opacity-100', 'translate-x-0');
    }, 100);
    
    // Agregar efecto de spotlight al hover
    notification.addEventListener('mousemove', function(e) {
      const rect = notification.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const spotlight = notification.querySelector('.magic-spotlight');
      if (spotlight) {
        spotlight.style.background = `radial-gradient(200px circle at ${x}px ${y}px, rgba(255,255,255,0.15), transparent 40%)`;
        spotlight.style.opacity = '1';
      }
    });
    
    notification.addEventListener('mouseleave', function() {
      const spotlight = notification.querySelector('.magic-spotlight');
      if (spotlight) {
        spotlight.style.opacity = '0';
      }
    });
    
    // Auto-remove despu√©s de 5 segundos
    setTimeout(() => {
      removeMagicNotification(notificationId);
    }, 5000);
    
    return notificationId;
  };
  
  // Funci√≥n para remover notificaciones
  window.removeMagicNotification = function(notificationId) {
    const notification = document.getElementById(notificationId);
    if (notification) {
      notification.classList.add('opacity-0', 'translate-x-full');
      setTimeout(() => {
        notification.remove();
      }, 500);
    }
  };
  
  // Ejemplos de notificaciones para Blixel AI
  window.showBlixelNotifications = function() {
    const notifications = [
      { type: 'success', title: '¬°IA Configurada!', message: 'Tu agente de IA est√° listo para trabajar' },
      { type: 'info', title: 'Nuevo Cliente', message: 'Solicitud de automatizaci√≥n recibida' },
      { type: 'star', title: 'Meta Alcanzada', message: '¬°100% de automatizaci√≥n completada!' },
      { type: 'gift', title: 'Promoci√≥n Activa', message: '50% descuento en servicios de IA' }
    ];
    
    notifications.forEach((notif, index) => {
      setTimeout(() => {
        window.createMagicNotification(notif.type, notif.title, notif.message);
      }, index * 1000);
    });
  };
</script>

<style>
  @keyframes border-beam {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
  
  .magic-notification {
    backdrop-filter: blur(16px);
  }
  
  .magic-notification:hover {
    transform: scale(1.02) rotateY(5deg);
  }
  
  .magic-spotlight {
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
</style>

<!-- Bot√≥n de demo para probar las notificaciones -->
<div class="fixed bottom-4 right-4 z-40">
  <button 
    onclick="showBlixelNotifications()" 
    class="px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full font-medium shadow-lg hover:scale-105 transition-all duration-200">
    üöÄ Demo Magic UI
  </button>
</div>
